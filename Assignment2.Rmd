---
title: "Assignment 2 Quant"
author: "Ryan Johnson"
date: "9/15/2020"
output: html_document
---
```{r load libraries, include=FALSE}
library(tidycensus)
library(tidyverse)
library(ggplot2)
library(viridis)
library(wesanderson)
```

###NOTE TO SELF DELETE ME

For each continuous variable in your dataset, calculate the sample mean, the sample standard deviation,
the 95-percent confidence interval for the population mean, and the interquartile range. Create a
histogram to illustrate the distribution of each variable and describe the distribution in a sentence or two.
For each categorical variable in your dataset, calculate the 95-percent confidence interval for the
proportion of the population in each category.
As you work on this assignment, you may find that you’ve changed your mind about which variables you
want to include in your dataset or how you want to define them. That’s not a problem; you can change
your dataset at any time. Clearly indicate how you’ve decided to change it and why.

===================================================================



```{r load dataset from csv, message=FALSE, warning=FALSE, results='hide'}
hh_data <- read_csv("travisrentalhh.csv")
attach(hh_data)
```

* The dataset loaded above includes four continuous variables - household income (HINCP), monthly rent (RNTP), number of people per household (NP), and number of bedrooms per household (BDSP) - and two categorical variables - household type (HHT_label), and building age in decades (BLDG_AGE_dec).

* This data was modified from my original data set, as I found that including households with either rental or mortgage payments cause too many entries with zero values in each of those variables. I added the bedrooms-per-household variable to better investigate relationships between household size and type, and rental costs. This change was accomplished by removing the mortage payment variable, adding the bedrooms variable, and adjusting my filter function accordingly. 



### Household income (dollars) - continuous

```{r summary, include=FALSE}
pop_mean <- t.test(HINCP)
pop_mean
```

* Sample characteristics:

```{r pretty summary hincp, message=FALSE}
paste("The sample mean household income is",
      prettyNum(mean(HINCP), digits = 5), "dollars.")
paste("The sample median household income is",
      prettyNum(median(HINCP), digits = 5), "dollars.")
paste("The sample standard deviation for household income is",
      prettyNum(sd(HINCP), digits = 5), "dollars.")
paste("The sample interquartile range for household income is",
      quantile(HINCP)["25%"], "to", quantile(HINCP)["75%"], "dollars.")
paste("The 95-percent confidence interval for the population mean is",
      prettyNum(pop_mean$conf.int[1], digits = 5), "to",
      prettyNum(pop_mean$conf.int[2], digits = 5), "dollars.")

```

* Histogram of distribution of sample household income:

```{r HINCP hist, message=FALSE, results='hide'}
HINCP_hist <- ggplot(hh_data, aes(x = HINCP)) +
  geom_histogram()

HINCP_hist +
  theme_minimal() +
  scale_x_continuous(name = "Househould annual income ($)") +
  scale_y_continuous(name = "Number of households in sample") +
  annotate("text", x = 250000, y = 1125, size = 3.25,
           label = paste("Population mean (95% confidence):",
                         prettyNum(pop_mean$conf.int[1], digits = 5), "to",
                         prettyNum(pop_mean$conf.int[2], digits = 5), "dollars",
                         "\nSample mean:",
                         prettyNum(mean(HINCP), digits = 5), "dollars",
                         "\nSample median:",
                         prettyNum(median(HINCP), digits = 5), "dollars",
                         "\nSample standard deviation:",
                         prettyNum(sd(HINCP), digits = 5), "dollars", 
                         "\nSample interquartile range:",
                         prettyNum(quantile(HINCP)["25%"], digits = 5),
                         "to",
                         prettyNum(quantile(HINCP)["75%"], digits = 5),
                         "dollars"),
           hjust = 0, vjust = 1)
                         

```

* As clearly seen in the histogram above, household income in this sample population is not distributed normally, but instead has a right skew, more like a negative binomial distribution. A few extreme outliers can be seen in the $1,000,000 range, which makes sense given this sample's location in Austin, a booming tech hub. The impact of these outliers is clear in that the median value is significantly lower than the mean.



### Monthly rent payment (dollars) - continuous
```{r rent popmean, include=FALSE}
rntp_mean <- t.test(RNTP)

```
* Sample characteristics:

```{r pretty summary rntp, message=FALSE}
paste("The sample mean monthly rent is",
      prettyNum(mean(RNTP), digits = 4), "dollars.")
paste("The sample median monthly rent is",
      prettyNum(median(RNTP), digits = 4), "dollars.")
paste("The sample standard deviation for monthly rent is",
      prettyNum(sd(RNTP), digits = 3), "dollars.")
paste("The sample interquartile range for monthly rent is",
      quantile(RNTP)["25%"], "to", quantile(RNTP)["75%"], "dollars.")
paste("The 95-percent confidence interval for the population mean is",
      prettyNum(rntp_mean$conf.int[1], digits = 4), "to",
      prettyNum(rntp_mean$conf.int[2], digits = 4), "dollars.")

```



* Overall distribution of rents in this sample:

```{r RNTP hist, message=FALSE, results='hide'}
RNTP_hist <- ggplot(hh_data, aes(x = RNTP)) +
  geom_histogram()

RNTP_hist +
  theme_minimal() +
  scale_x_continuous(name = "Monthly rent ($)") +
  scale_y_continuous(name = "Number of households in sample") +
  annotate("text", x = 1750, y = 450, size = 3.25,
           label = paste("Population mean (95% confidence):",
                         prettyNum(rntp_mean$conf.int[1], digits = 4), "to",
                         prettyNum(rntp_mean$conf.int[2], digits = 4), "\n dollars",
                         "\nSample mean:",
                         prettyNum(mean(RNTP), digits = 4), "dollars",
                         "\nSample median:",
                         prettyNum(median(RNTP), digits = 4), "dollars",
                         "\nSample standard deviation:",
                         prettyNum(sd(RNTP), digits = 3), "dollars", 
                         "\nSample interquartile range:",
                         prettyNum(quantile(RNTP)["25%"], digits = 4),
                         "to",
                         prettyNum(quantile(RNTP)["75%"], digits = 4),
                         "dollars"),
           hjust = 0, vjust = 1)
```

* The distribution of monthly rents in this sample is closer to normal, albeit with a significant number of outliers at $3,000/month. This represents one potential limitation of the data, as it is unclear whether this was the actual maximum value recorded, or simply the upper limit of potential values. There are also discernible peaks at approximately 900 and 1600, lined up with the 1st and 3rd quartiles. 


### Number of people per household - continuous

```{r NP summary, message=FALSE}
NP_summary <- summary(hh_data$NP)

NP_summary
```


* Sample mean number of people per household:

```{r NP MEAN, message=FALSE}
mean(hh_data$NP)
```



* Sample standard deviation:

```{r NP DEVIATION, message=FALSE}
sd(hh_data$NP)
```



* 95-percent confidence interval population mean:

```{r CONF NP, message=FALSE}
conf_NP <- t.test(hh_data$NP)

conf_NP
```



* Interquartile range (from summary statistics, above):

2, between 2 (Q1) to 4 (Q3).



* Overall distribution of household size in this sample:

```{r NP hist, message=FALSE}
ggplot(hh_data, aes(x = NP)) +
  geom_histogram()

```

* The distribution of household size in this sample appears to be a Poisson distribution, or negative binomial. Because this value only represents whole people, the histogram is very clearly binned into whole integers. As with the other non-normal variables, a smaller number of outliers can be seen at the extreme high value. These are likely rental households occupied by groups of students, or very large families. 


### Number of bedrooms per household - continuous

```{r BDSP summary, message=FALSE}
BDSP_summary <- summary(hh_data$BDSP)

BDSP_summary
```


* Sample mean bedrooms per household:

```{r BDSP MEAN, message=FALSE}
mean(hh_data$BDSP)
```



* Sample standard deviation:

```{r SD BDSP, message=FALSE}
sd(hh_data$BDSP)
```



* 95-percent confidence interval population mean:

```{r CONF BDSP, message=FALSE}
conf_BDSP <- t.test(hh_data$BDSP)

conf_BDSP
```



* Interquartile range (from summary statistics, above):

2, between 1 (Q1) to 3 (Q3).



* Overall distribution of bedroom quantity in this sample:

```{r BDSP hist, message=FALSE}
ggplot(hh_data, aes(x = BDSP)) +
  geom_histogram()

```

* The distribution of bedroom counts in this sample is also close to normal. As with number of people, this data is only collected in whole numbers, resulting in the spacious, binned distribution. This data appears to have a slight right skew, but it is hard to say definitively.


### Household type - categorical 

```{r HHT all values, message=FALSE, results='hide'}
unique(hh_data$HHT_label)
```

```{r HHT table, message=FALSE, results='hide'}
table(hh_data$HHT_label)
```

```{r HHT table proportions, message=FALSE, results='hide'}
HHT_proportions <- table(hh_data$HHT_label) / sum(table(hh_data$HHT_label))

HHT_proportions

```

```{r HHT proportion mean calc, message=FALSE, results='hide'}
mean(hh_data$HHT_label == "Married couple household")
```


```{r conf HHT, message=FALSE, results='hide'}
t.test(hh_data$HHT_label == "Married couple household")
```

